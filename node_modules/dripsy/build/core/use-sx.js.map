{"version":3,"file":"use-sx.js","sourceRoot":"","sources":["../../src/core/use-sx.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,MAAM,EAAE,MAAM,OAAO,CAAA;AAC9B,OAAO,EAAE,cAAc,EAAE,MAAM,oBAAoB,CAAA;AACnD,OAAO,EAAE,GAAG,EAAE,MAAM,OAAO,CAAA;AAC3B,OAAO,EAAE,kBAAkB,EAAE,MAAM,0BAA0B,CAAA;AAC7D,OAAO,UAAU,MAAM,aAAa,CAAA;AAKpC,MAAM,UAAU,KAAK;IACnB,MAAM,EAAE,KAAK,EAAE,GAAG,cAAc,EAAE,CAAA;IAClC,MAAM,UAAU,GAAG,kBAAkB,EAAE,CAAA;IAEvC,MAAM,KAAK,GAAG,MAAM,CAA8B,IAAI,GAAG,EAAE,CAAC,CAAA;IAE5D,OAAO,CACL,EAAU,EACV,EAAE,QAAQ,KAA4C,EAAE,EACxD,EAAE;QACF,MAAM,WAAW,GAAG,GAAG,CACrB,EAAE,EACF,UAAU,CACX,CAAC;YACA,KAAK;YACL,QAAQ;SACT,CAAC,CAAA;QACF,MAAM,IAAI,GAAG,UAAU,CAAC,WAAW,CAAC,CAAA;QACpC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;YAC5B,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,WAAW,CAAC,CAAA;SACrC;QACD,OAAO,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;IAChC,CAAC,CAAA;AACH,CAAC","sourcesContent":["import { useRef } from 'react'\nimport { useDripsyTheme } from './use-dripsy-theme'\nimport { css } from './css'\nimport { useBreakpointIndex } from './css/breakpoint-context'\nimport stableHash from 'stable-hash'\nimport { DripsyFinalTheme } from './types-v2/declarations'\nimport { StyleProp } from 'react-native'\nimport { SxProp } from './types-v2/sx'\n\nexport function useSx() {\n  const { theme } = useDripsyTheme()\n  const breakpoint = useBreakpointIndex()\n\n  const cache = useRef<Map<string, StyleProp<any>>>(new Map())\n\n  return (\n    sx: SxProp,\n    { themeKey }: { themeKey?: keyof DripsyFinalTheme } = {}\n  ) => {\n    const themedStyle = css(\n      sx,\n      breakpoint\n    )({\n      theme,\n      themeKey,\n    })\n    const hash = stableHash(themedStyle)\n    if (!cache.current.has(hash)) {\n      cache.current.set(hash, themedStyle)\n    }\n    return cache.current.get(hash)\n  }\n}\n"]}